<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PC 2025 Season 8 - Team Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .team-card {
            transition: all 0.3s ease;
        }

        .team-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.3);
        }

        .loading-spinner {
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            from {
                transform: rotate(0deg);
            }

            to {
                transform: rotate(360deg);
            }
        }
    </style>
</head>

<body class="bg-gradient-to-br from-blue-900 via-purple-900 to-indigo-900 min-h-screen text-white">
    <!-- Header -->
    <header class="bg-black/30 backdrop-blur-lg border-b border-white/20 p-4 sticky top-0 z-10">
        <div class="max-w-7xl mx-auto">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <div class="flex items-center space-x-3">
                        <div class="text-4xl">üèè</div>
                        <div>
                            <h1 class="text-3xl font-bold text-yellow-400">Persistent Cricket 2025</h1>
                            <div class="flex items-center space-x-2">
                                <span class="text-lg font-bold text-orange-400">Season 8</span>
                                <span class="text-sm text-gray-300">‚Ä¢</span>
                                <span class="text-lg text-gray-300">Team Dashboard</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <div id="lastUpdated" class="text-xs text-gray-400">
                        Loading...
                    </div>
                    <div id="connectionStatus" class="text-xs px-3 py-1 rounded-full bg-blue-500/20 text-blue-400">
                        üîÑ Loading data...
                    </div>
                    <div class="flex items-center space-x-2">
                        <button onclick="downloadTeamsData()"
                            class="bg-green-500 hover:bg-green-600 px-3 py-2 rounded-lg transition-colors text-sm">
                            üíæ Download
                        </button>
                        <button onclick="document.getElementById('fileInput').click()"
                            class="bg-purple-500 hover:bg-purple-600 px-3 py-2 rounded-lg transition-colors text-sm">
                            üì§ Upload
                        </button>
                        <button onclick="refreshData()"
                            class="bg-blue-500 hover:bg-blue-600 px-3 py-2 rounded-lg transition-colors text-sm">
                            üîÑ Refresh
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 py-6">
        <!-- Loading State -->
        <div id="loadingState" class="text-center py-12">
            <div class="mb-6">
                <div class="text-8xl mb-4">üèè</div>
                <div class="loading-spinner rounded-full h-16 w-16 border-b-2 border-yellow-400 mx-auto mb-4"></div>
            </div>
            <h2 class="text-2xl font-bold text-yellow-400 mb-2">Loading Season 8 Team Data...</h2>
            <p class="text-gray-300">üèüÔ∏è Reading from teams.json file</p>
            <div class="flex justify-center items-center space-x-2 mt-4 text-sm text-gray-400">
                <span>üèÜ</span>
                <span>Persistent Cricket League</span>
                <span>üèÜ</span>
            </div>
        </div>

        <!-- Error State -->
        <div id="errorState" class="hidden text-center py-12">
            <div class="mb-6">
                <div class="text-6xl mb-2">üèè</div>
                <div class="text-4xl mb-4">‚ö†Ô∏è</div>
            </div>
            <h2 class="text-2xl font-bold text-red-400 mb-4">Unable to Load Season 8 Team Data</h2>
            <div id="errorMessage" class="text-gray-300 mb-6"></div>
            <div class="space-y-2">
                <button onclick="refreshData()"
                    class="bg-blue-500 hover:bg-blue-600 px-6 py-3 rounded-lg transition-colors">
                    üîÑ Try Again
                </button>
                <div class="text-sm text-gray-400 mt-4 space-y-2">
                    <p id="dataSourceInfo">üèüÔ∏è Currently using hardcoded Season 8 data</p>
                    <p>üì§ Use the <strong>Upload</strong> button to load a teams.json file from your computer</p>
                    <p>üíæ Use <strong>Download</strong> to save current data to your computer</p>
                    <p class="mt-2">üèÜ Persistent Cricket League Season 8</p>
                </div>
            </div>
        </div>

        <!-- Tournament Summary -->
        <div id="tournamentSummary" class="hidden mb-8 fade-in">
            <div class="bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20">
                <div class="flex items-center justify-between mb-4">
                    <h2 class="text-2xl font-bold text-yellow-400">üèÜ Season 8 Tournament Overview</h2>
                    <div class="flex items-center space-x-2 text-sm">
                        <span class="bg-orange-500/20 text-orange-400 px-3 py-1 rounded-full font-bold">Season 8</span>
                        <span class="text-gray-400">üèüÔ∏è PCL 2025</span>
                    </div>
                </div>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <div class="text-center bg-white/5 rounded-lg p-4">
                        <div class="text-2xl mb-1">üèè</div>
                        <div id="totalTeams" class="text-3xl font-bold text-blue-400">0</div>
                        <div class="text-sm text-gray-300">Teams</div>
                    </div>
                    <div class="text-center bg-white/5 rounded-lg p-4">
                        <div class="text-2xl mb-1">üë•</div>
                        <div id="totalPlayers" class="text-3xl font-bold text-green-400">0</div>
                        <div class="text-sm text-gray-300">Total Players</div>
                    </div>
                    <div class="text-center bg-white/5 rounded-lg p-4">
                        <div class="text-2xl mb-1">üí∞</div>
                        <div id="totalSpent" class="text-3xl font-bold text-red-400">‚Çπ0</div>
                        <div class="text-sm text-gray-300">Total Spent</div>
                    </div>
                    <div class="text-center bg-white/5 rounded-lg p-4">
                        <div class="text-2xl mb-1">üìä</div>
                        <div id="avgSpendPerTeam" class="text-3xl font-bold text-yellow-400">‚Çπ0</div>
                        <div class="text-sm text-gray-300">Avg per Team</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Teams Grid -->
        <div id="teamsContainer" class="hidden">
            <div class="flex justify-between items-center mb-6">
                <div class="flex items-center space-x-3">
                    <h2 class="text-2xl font-bold text-yellow-400">üèè Season 8 Team Squads</h2>
                    <span class="text-sm bg-orange-500/20 text-orange-400 px-2 py-1 rounded-full">üèÜ PCL 2025</span>
                </div>
                <div class="flex items-center space-x-4">
                    <select id="sortBy" onchange="sortTeams()"
                        class="px-4 py-2 bg-white/10 border border-white/30 rounded-lg text-white">
                        <option value="name" class="bg-gray-800 text-white">Sort by Name</option>
                        <option value="players" class="bg-gray-800 text-white">Sort by Players Count</option>
                        <option value="spent" class="bg-gray-800 text-white">Sort by Amount Spent</option>
                        <option value="budget" class="bg-gray-800 text-white">Sort by Remaining Budget</option>
                    </select>
                    <div class="text-sm text-gray-400 space-y-1">
                        <div><span id="teamCount">0</span> teams loaded</div>
                        <div id="dataSource" class="text-xs">üìä Using hardcoded data</div>
                    </div>
                </div>
            </div>
            <div id="teamsGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Teams will be populated here -->
            </div>
        </div>
    </main>

    <!-- Hidden File Input -->
    <input type="file" id="fileInput" accept=".json" style="display: none;" onchange="handleFileUpload(event)">

    <!-- Player Details Modal -->
    <div id="playerModal"
        class="hidden fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50">
        <div class="bg-white/10 backdrop-blur-lg rounded-2xl p-6 w-full max-w-md border border-white/20">
            <div class="flex justify-between items-center mb-4">
                <div class="flex items-center space-x-2">
                    <h3 class="text-xl font-bold text-yellow-400">üèè Player Details</h3>
                    <span class="text-xs bg-orange-500/20 text-orange-400 px-2 py-1 rounded-full">Season 8</span>
                </div>
                <button onclick="closePlayerModal()" class="text-gray-400 hover:text-white text-2xl">&times;</button>
            </div>
            <div id="playerDetails" class="space-y-4">
                <!-- Player details will be populated here -->
            </div>
        </div>
    </div>

    <script>
        let teams = [];
        let currentSort = 'name';

        // Hardcoded Teams Data - Season 8
        const hardcodedTeamsData = [
            {
                "id": 1,
                "name": "MI Paltan",
                "budget": 1100,
                "color": "bg-blue-600",
                "owner": "Owner 1",
                "players": [
                    {
                        "id": 54,
                        "name": "Sagar Varma",
                        "role": "Batsman",
                        "runs": 122,
                        "wickets": 0,
                        "pclSeasons": [
                            "6,7"
                        ],
                        "basePrice": 500,
                        "soldPrice": 3600,
                        "photo": "photos/Sagar_Varma.jpg",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 67,
                        "name": "Shailesh Joshi",
                        "role": "All-Rounder",
                        "runs": 96,
                        "wickets": 77,
                        "pclSeasons": [
                            "1,2,3,4,5,6,7"
                        ],
                        "basePrice": 10000,
                        "soldPrice": 10000,
                        "photo": "photos/Shailesh_Joshi.jpg",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 90,
                        "name": "Sandeep Dardemal",
                        "role": "All-Rounder",
                        "runs": 270,
                        "wickets": 28,
                        "pclSeasons": [
                            "3,4,5,6,7"
                        ],
                        "basePrice": 500,
                        "soldPrice": 9500,
                        "photo": "üèè",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 71,
                        "name": "Shubhankar Saraf",
                        "role": "Batsman",
                        "runs": 76,
                        "wickets": 4,
                        "pclSeasons": [
                            "7"
                        ],
                        "basePrice": 500,
                        "soldPrice": 9500,
                        "photo": "photos/Shubhankar_Saraf.jpg",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 62,
                        "name": "Sangam Thakur",
                        "role": "Batsman",
                        "runs": 45,
                        "wickets": 0,
                        "pclSeasons": [
                            "6,7"
                        ],
                        "basePrice": 500,
                        "soldPrice": 500,
                        "photo": "photos/Sangam_Thakur.jpg",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 59,
                        "name": "Sandeep Nagarke",
                        "role": "Batsman",
                        "runs": 221,
                        "wickets": 15,
                        "pclSeasons": [
                            "1,2,3,4,5,6,7"
                        ],
                        "basePrice": 500,
                        "soldPrice": 2600,
                        "photo": "photos/Sandeep_Nagarke.jpg",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 26,
                        "name": "Dileshwar Patle",
                        "role": "Batsman",
                        "runs": 100,
                        "wickets": 7,
                        "pclSeasons": [
                            "5,7"
                        ],
                        "basePrice": 500,
                        "soldPrice": 6500,
                        "photo": "photos/Dileshwar_Patle.jpg",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 41,
                        "name": "Mukul Tijare",
                        "role": "Batsman",
                        "runs": 25,
                        "wickets": 0,
                        "pclSeasons": [
                            "6"
                        ],
                        "basePrice": 500,
                        "soldPrice": 1100,
                        "photo": "photos/Mukul_Tijare.jpg",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 48,
                        "name": "Rahul Dakhole",
                        "role": "All-Rounder",
                        "runs": 117,
                        "wickets": 71,
                        "pclSeasons": [
                            "2,3,4,5,7"
                        ],
                        "basePrice": 500,
                        "soldPrice": 11000,
                        "photo": "üèè",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 77,
                        "name": "Sushant Singh ",
                        "role": "Bowler",
                        "runs": 39,
                        "wickets": 59,
                        "pclSeasons": [
                            "2,3,4,5,6,7"
                        ],
                        "basePrice": 500,
                        "soldPrice": 4800,
                        "photo": "photos/Sushant_Singh.jpg",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 50,
                        "name": "Rahul Nain",
                        "role": "All-Rounder",
                        "runs": 367,
                        "wickets": 20,
                        "pclSeasons": [
                            "6,7"
                        ],
                        "basePrice": 500,
                        "soldPrice": 12500,
                        "photo": "üèè",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 93,
                        "name": "Sandeep Yadav",
                        "role": "Batsman",
                        "runs": 15,
                        "wickets": 7,
                        "pclSeasons": [
                            "5"
                        ],
                        "basePrice": 500,
                        "soldPrice": 800,
                        "photo": "üèè",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 63,
                        "name": "Sanket Trivedi",
                        "role": "Batsman",
                        "runs": 4,
                        "wickets": 0,
                        "pclSeasons": [
                            "7"
                        ],
                        "basePrice": 500,
                        "soldPrice": 1500,
                        "photo": "üèè",
                        "battingStyle": "Right-handed"
                    }
                ]
            },
            {
                "id": 2,
                "name": "Sunrisers",
                "budget": 0,
                "color": "bg-orange-600",
                "owner": "Owner 2",
                "players": [
                    {
                        "id": 30,
                        "name": "Hrushikesh Zadgaonkar",
                        "role": "Batsman",
                        "runs": 1071,
                        "wickets": 14,
                        "pclSeasons": [
                            "1,2,3,4,5,6,7"
                        ],
                        "basePrice": 500,
                        "soldPrice": 14000,
                        "photo": "üèè",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 9,
                        "name": "Amey Jodh",
                        "role": "All-Rounder",
                        "runs": 135,
                        "wickets": 23,
                        "pclSeasons": [
                            "6,7"
                        ],
                        "basePrice": 10000,
                        "soldPrice": 10000,
                        "photo": "photos/Amey_Jodh.jpg",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 91,
                        "name": "Rishikesh Kose",
                        "role": "Batsman",
                        "runs": 33,
                        "wickets": 0,
                        "pclSeasons": [
                            "6"
                        ],
                        "basePrice": 500,
                        "soldPrice": 2600,
                        "photo": "üèè",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 27,
                        "name": "Chetan Zade",
                        "role": "Batsman",
                        "runs": 0,
                        "wickets": 0,
                        "pclSeasons": [
                            "0"
                        ],
                        "basePrice": 500,
                        "soldPrice": 1300,
                        "photo": "üèè",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 100,
                        "name": "Rajat Raghatate",
                        "role": "Batsman",
                        "runs": 182,
                        "wickets": 1,
                        "pclSeasons": [
                            "1",
                            "2",
                            "6",
                            "5"
                        ],
                        "basePrice": 500,
                        "soldPrice": 2800,
                        "photo": "üèè",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 70,
                        "name": "Shubham Handa",
                        "role": "Batsman",
                        "runs": 95,
                        "wickets": 5,
                        "pclSeasons": [
                            "6,7"
                        ],
                        "basePrice": 500,
                        "soldPrice": 2200,
                        "photo": "photos/Shubham_Handa.jpg",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 10,
                        "name": "Amit Gawande",
                        "role": "Batsman",
                        "runs": 48,
                        "wickets": 0,
                        "pclSeasons": [
                            "1,2,6,7"
                        ],
                        "basePrice": 500,
                        "soldPrice": 2400,
                        "photo": "photos/Amit_Gawande.jpg",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 74,
                        "name": "Subodh Kamble",
                        "role": "All-Rounder",
                        "runs": 86,
                        "wickets": 16,
                        "pclSeasons": [
                            "6,7"
                        ],
                        "basePrice": 500,
                        "soldPrice": 5000,
                        "photo": "photos/Subodh_Kamble.jpg",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 61,
                        "name": "Sandesh Dubey ",
                        "role": "Batsman",
                        "runs": 307,
                        "wickets": 13,
                        "pclSeasons": [
                            "6,7"
                        ],
                        "basePrice": 500,
                        "soldPrice": 20500,
                        "photo": "photos/Sandesh_Dubey.jpg",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 18,
                        "name": "Ashwin Bharti",
                        "role": "Batsman",
                        "runs": 15,
                        "wickets": 3,
                        "pclSeasons": [
                            "6,7"
                        ],
                        "basePrice": 500,
                        "soldPrice": 1100,
                        "photo": "photos/Ashwin_Bharti.jpg",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 28,
                        "name": "Gaurav Deshmukh",
                        "role": "Batsman",
                        "runs": 34,
                        "wickets": 1,
                        "pclSeasons": [
                            "6,7"
                        ],
                        "basePrice": 500,
                        "soldPrice": 1100,
                        "photo": "photos/Gaurav_Deshmukh.jpg",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 94,
                        "name": "Prasad Shembhekar",
                        "role": "Batsman",
                        "runs": 0,
                        "wickets": 0,
                        "pclSeasons": [
                            "0"
                        ],
                        "basePrice": 500,
                        "soldPrice": 500,
                        "photo": "üèè",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 95,
                        "name": "Manoj Meshram",
                        "role": "Batsman",
                        "runs": 0,
                        "wickets": 0,
                        "pclSeasons": [
                            "0"
                        ],
                        "basePrice": 500,
                        "soldPrice": 500,
                        "photo": "üèè",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 85,
                        "name": "Yogesh Ghotekar",
                        "role": "Batsman",
                        "runs": 0,
                        "wickets": 0,
                        "pclSeasons": [
                            "0"
                        ],
                        "basePrice": 500,
                        "soldPrice": 5500,
                        "photo": "photos/Yogesh_Ghotekar.jpg",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 69,
                        "name": "Shardul Kalwit",
                        "role": "Batsman",
                        "runs": 0,
                        "wickets": 0,
                        "pclSeasons": [
                            "0"
                        ],
                        "basePrice": 500,
                        "soldPrice": 5500,
                        "photo": "üèè",
                        "battingStyle": "Right-handed"
                    }
                ]
            },
            {
                "id": 3,
                "name": "Knight Riders",
                "budget": 1400,
                "color": "bg-purple-600",
                "owner": "Owner 3",
                "players": [
                    {
                        "id": 23,
                        "name": "Chaitanya Tol",
                        "role": "Batsman",
                        "runs": 0,
                        "wickets": 0,
                        "pclSeasons": [
                            "0"
                        ],
                        "basePrice": 10000,
                        "soldPrice": 10000,
                        "photo": "photos/Chaitanya_Tol.jpg",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 73,
                        "name": "Sooraj Bhattad",
                        "role": "Batsman",
                        "runs": 43,
                        "wickets": 0,
                        "pclSeasons": [
                            "1"
                        ],
                        "basePrice": 500,
                        "soldPrice": 500,
                        "photo": "üèè",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 12,
                        "name": "Ankit Vaidya",
                        "role": "Batsman",
                        "runs": 229,
                        "wickets": 0,
                        "pclSeasons": [
                            "5,6,7"
                        ],
                        "basePrice": 500,
                        "soldPrice": 11000,
                        "photo": "photos/Ankit_Vaidya.jpg",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 4,
                        "name": "Aditya Joshi",
                        "role": "All-Rounder",
                        "runs": 75,
                        "wickets": 26,
                        "pclSeasons": [
                            "5"
                        ],
                        "basePrice": 500,
                        "soldPrice": 9000,
                        "photo": "üèè",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 37,
                        "name": "Mirza QadirBaig",
                        "role": "Batsman",
                        "runs": 29,
                        "wickets": 0,
                        "pclSeasons": [
                            "7"
                        ],
                        "basePrice": 500,
                        "soldPrice": 5500,
                        "photo": "üèè",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 8,
                        "name": "Akshay Mankar",
                        "role": "All-Rounder",
                        "runs": 175,
                        "wickets": 22,
                        "pclSeasons": [
                            "6,7"
                        ],
                        "basePrice": 500,
                        "soldPrice": 12000,
                        "photo": "photos/Akshay_Mankar.jpg",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 78,
                        "name": "Suyog Vairagade",
                        "role": "Batsman",
                        "runs": 172,
                        "wickets": 0,
                        "pclSeasons": [
                            "6,7"
                        ],
                        "basePrice": 500,
                        "soldPrice": 3600,
                        "photo": "photos/Suyog_Vairagade.jpg",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 47,
                        "name": "Rahul Bhakre ",
                        "role": "Batsman",
                        "runs": 158,
                        "wickets": 7,
                        "pclSeasons": [
                            "6,7"
                        ],
                        "basePrice": 500,
                        "soldPrice": 4000,
                        "photo": "photos/Rahul_Bhakre.jpg",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 82,
                        "name": "Vikram Pandey",
                        "role": "All-Rounder",
                        "runs": 411,
                        "wickets": 45,
                        "pclSeasons": [
                            "1,2,5,6,7"
                        ],
                        "basePrice": 500,
                        "soldPrice": 12000,
                        "photo": "photos/Vikram_Pandey.jpg",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 17,
                        "name": "Ashish Patel",
                        "role": "Batsman",
                        "runs": 13,
                        "wickets": 0,
                        "pclSeasons": [
                            "7"
                        ],
                        "basePrice": 500,
                        "soldPrice": 700,
                        "photo": "photos/Ashish_Patel.jpg",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 11,
                        "name": "Amol Khobragade",
                        "role": "Batsman",
                        "runs": 0,
                        "wickets": 0,
                        "pclSeasons": [
                            "0"
                        ],
                        "basePrice": 500,
                        "soldPrice": 900,
                        "photo": "üèè",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 96,
                        "name": "Sushen Tiwari",
                        "role": "Batsman",
                        "runs": 6,
                        "wickets": 0,
                        "pclSeasons": [
                            "7"
                        ],
                        "basePrice": 500,
                        "soldPrice": 500,
                        "photo": "üèè",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 92,
                        "name": "Manish Gurve",
                        "role": "Batsman",
                        "runs": 0,
                        "wickets": 0,
                        "pclSeasons": [
                            "0"
                        ],
                        "basePrice": 500,
                        "soldPrice": 3400,
                        "photo": "üèè",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 13,
                        "name": "Ankur Shrestha",
                        "role": "Batsman",
                        "runs": 19,
                        "wickets": 0,
                        "pclSeasons": [
                            "5"
                        ],
                        "basePrice": 500,
                        "soldPrice": 500,
                        "photo": "üèè",
                        "battingStyle": "Right-handed"
                    }
                ]
            },
            {
                "id": 4,
                "name": "Kings",
                "budget": 1000,
                "color": "bg-red-600",
                "owner": "Owner 4",
                "players": [
                    {
                        "id": 76,
                        "name": "Sumedh Gandhi",
                        "role": "All-Rounder",
                        "runs": 1219,
                        "wickets": 75,
                        "pclSeasons": [
                            "1,2,3,4,5,6,7"
                        ],
                        "basePrice": 500,
                        "soldPrice": 24500,
                        "photo": "photos/Sumedh_Gandhi.jpg",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 24,
                        "name": "Deepak Yadav",
                        "role": "Batsman",
                        "runs": 30,
                        "wickets": 5,
                        "pclSeasons": [
                            "6"
                        ],
                        "basePrice": 10000,
                        "soldPrice": 10000,
                        "photo": "photos/Deepak_Yadav.jpg",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 81,
                        "name": "Vaibhav Bani",
                        "role": "Batsman",
                        "runs": 14,
                        "wickets": 0,
                        "pclSeasons": [
                            "1,2,3,4"
                        ],
                        "basePrice": 500,
                        "soldPrice": 1200,
                        "photo": "üèè",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 19,
                        "name": "Avinash Nagpure",
                        "role": "All-Rounder",
                        "runs": 490,
                        "wickets": 43,
                        "pclSeasons": [
                            "1,2,3,4,5"
                        ],
                        "basePrice": 500,
                        "soldPrice": 9500,
                        "photo": "photos/Avinash_Nagpure.jpg",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 83,
                        "name": "Vishal Borkar",
                        "role": "Batsman",
                        "runs": 0,
                        "wickets": 0,
                        "pclSeasons": [
                            "0"
                        ],
                        "basePrice": 500,
                        "soldPrice": 4400,
                        "photo": "üèè",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 98,
                        "name": "Sushank Sakharwade",
                        "role": "Batsman",
                        "runs": 11,
                        "wickets": 0,
                        "pclSeasons": [
                            "6",
                            "7"
                        ],
                        "basePrice": 500,
                        "soldPrice": 500,
                        "photo": "üèè",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 44,
                        "name": "Nitin Bhade",
                        "role": "Batsman",
                        "runs": 7,
                        "wickets": 0,
                        "pclSeasons": [
                            "7"
                        ],
                        "basePrice": 500,
                        "soldPrice": 500,
                        "photo": "photos/Nitin_Bhade.jpg",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 3,
                        "name": "Adil Khan",
                        "role": "All-Rounder",
                        "runs": 396,
                        "wickets": 29,
                        "pclSeasons": [
                            "1,2,3,4,5,6,7"
                        ],
                        "basePrice": 500,
                        "soldPrice": 9000,
                        "photo": "photos/Adil_Khan.jpg",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 1,
                        "name": "Abhisar Deshmukh",
                        "role": "Batsman",
                        "runs": 191,
                        "wickets": 0,
                        "pclSeasons": [
                            "4,5,7"
                        ],
                        "basePrice": 500,
                        "soldPrice": 500,
                        "photo": "üèè",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 15,
                        "name": "Anshul Sahoo",
                        "role": "Batsman",
                        "runs": 0,
                        "wickets": 0,
                        "pclSeasons": [
                            "0"
                        ],
                        "basePrice": 500,
                        "soldPrice": 500,
                        "photo": "photos/Anshul_Sahoo.jpg",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 14,
                        "name": "Ankush Charde",
                        "role": "Batsman",
                        "runs": 46,
                        "wickets": 15,
                        "pclSeasons": [
                            "7"
                        ],
                        "basePrice": 500,
                        "soldPrice": 11000,
                        "photo": "üèè",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 53,
                        "name": "Sagar Domde ",
                        "role": "Batsman",
                        "runs": 14,
                        "wickets": 0,
                        "pclSeasons": [
                            "7"
                        ],
                        "basePrice": 500,
                        "soldPrice": 1700,
                        "photo": "üèè",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 1756900239267,
                        "name": "Shantantu Nawade",
                        "role": "Batsman",
                        "runs": 0,
                        "wickets": 0,
                        "pclSeasons": [
                            "0"
                        ],
                        "basePrice": 500,
                        "soldPrice": 700,
                        "photo": "photos/default.jpg",
                        "battingStyle": "Right-handed"
                    }
                ]
            },
            {
                "id": 5,
                "name": "Titans",
                "budget": 4000,
                "color": "bg-blue-600",
                "owner": "Owner 5",
                "players": [
                    {
                        "id": 5,
                        "name": "Ahmad Saqib Iqbal",
                        "role": "Batsman",
                        "runs": 148,
                        "wickets": 0,
                        "pclSeasons": [
                            "6,7"
                        ],
                        "basePrice": 10000,
                        "soldPrice": 10000,
                        "photo": "photos/Ahmad_Saqib_Iqbal.jpg",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 56,
                        "name": "Salman Pathan",
                        "role": "Batsman",
                        "runs": 288,
                        "wickets": 0,
                        "pclSeasons": [
                            "3,4,5,6,7"
                        ],
                        "basePrice": 500,
                        "soldPrice": 4200,
                        "photo": "üèè",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 68,
                        "name": "Rahul Shingne",
                        "role": "Batsman",
                        "runs": 0,
                        "wickets": 0,
                        "pclSeasons": [
                            "0"
                        ],
                        "basePrice": 500,
                        "soldPrice": 1500,
                        "photo": "üèè",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 58,
                        "name": "Mohammad Akram",
                        "role": "Batsman",
                        "runs": 31,
                        "wickets": 0,
                        "pclSeasons": [
                            "5"
                        ],
                        "basePrice": 500,
                        "soldPrice": 6500,
                        "photo": "üèè",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 22,
                        "name": "Chaitanya Ramteke",
                        "role": "Batsman",
                        "runs": 13,
                        "wickets": 0,
                        "pclSeasons": [
                            "7"
                        ],
                        "basePrice": 500,
                        "soldPrice": 1900,
                        "photo": "üèè",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 16,
                        "name": "Arun Sahu",
                        "role": "All-Rounder",
                        "runs": 94,
                        "wickets": 50,
                        "pclSeasons": [
                            "1,2,5,7"
                        ],
                        "basePrice": 500,
                        "soldPrice": 9500,
                        "photo": "üèè",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 40,
                        "name": "Mujahid Sheikh",
                        "role": "Batsman",
                        "runs": 79,
                        "wickets": 0,
                        "pclSeasons": [
                            "3,4,5,6,7"
                        ],
                        "basePrice": 500,
                        "soldPrice": 2000,
                        "photo": "photos/Mujahid_Sheikh.jpg",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 75,
                        "name": "Sudhir Kukade",
                        "role": "Batsman",
                        "runs": 90,
                        "wickets": 14,
                        "pclSeasons": [
                            "4,5,6,7"
                        ],
                        "basePrice": 500,
                        "soldPrice": 4200,
                        "photo": "üèè",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 51,
                        "name": "Mohammad Tausif Sheikh",
                        "role": "Batsman",
                        "runs": 0,
                        "wickets": 0,
                        "pclSeasons": [
                            "0"
                        ],
                        "basePrice": 500,
                        "soldPrice": 2000,
                        "photo": "üèè",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 45,
                        "name": "Piyush Bramhe",
                        "role": "All-Rounder",
                        "runs": 285,
                        "wickets": 103,
                        "pclSeasons": [
                            "1,2,3,4,5,6,7"
                        ],
                        "basePrice": 500,
                        "soldPrice": 9500,
                        "photo": "photos/Piyush_Bramhe.jpg",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 65,
                        "name": "Satyam Korde",
                        "role": "Batsman",
                        "runs": 36,
                        "wickets": 0,
                        "pclSeasons": [
                            "6,7"
                        ],
                        "basePrice": 500,
                        "soldPrice": 3400,
                        "photo": "photos/Satyam_Korde.jpg",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 52,
                        "name": "Roshan Thakur",
                        "role": "Batsman",
                        "runs": 51,
                        "wickets": 0,
                        "pclSeasons": [
                            "6,7"
                        ],
                        "basePrice": 500,
                        "soldPrice": 700,
                        "photo": "photos/Roshan_Thakur.jpg",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 33,
                        "name": "Mandar Kulkarni_new",
                        "role": "Batsman",
                        "runs": 116,
                        "wickets": 0,
                        "pclSeasons": [
                            "6,7"
                        ],
                        "basePrice": 500,
                        "soldPrice": 2000,
                        "photo": "photos/Mandar_Kulkarni.jpg",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 7,
                        "name": "Akash Singh",
                        "role": "All-Rounder",
                        "runs": 74,
                        "wickets": 19,
                        "pclSeasons": [
                            "7"
                        ],
                        "basePrice": 500,
                        "soldPrice": 12000,
                        "photo": "photos/Akash_Singh.jpg",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 64,
                        "name": "Sarfaraz Sheikh",
                        "role": "Batsman",
                        "runs": 40,
                        "wickets": 4,
                        "pclSeasons": [
                            "1,6,7"
                        ],
                        "basePrice": 500,
                        "soldPrice": 1600,
                        "photo": "üèè",
                        "battingStyle": "Right-handed"
                    }
                ]
            },
            {
                "id": 6,
                "name": "Royal Challengers",
                "budget": 1300,
                "color": "bg-red-800",
                "owner": "Owner 6",
                "players": [
                    {
                        "id": 29,
                        "name": "Geet Gattani",
                        "role": "Batsman",
                        "runs": 60,
                        "wickets": 0,
                        "pclSeasons": [
                            "7"
                        ],
                        "basePrice": 10000,
                        "soldPrice": 10000,
                        "photo": "photos/Geeet_Gattani.jpg",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 46,
                        "name": "Pravin Kalbande",
                        "role": "Batsman",
                        "runs": 219,
                        "wickets": 0,
                        "pclSeasons": [
                            "6,7"
                        ],
                        "basePrice": 500,
                        "soldPrice": 12000,
                        "photo": "photos/Pravin_Kalbande.jpg",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 88,
                        "name": "Yogesh Raich",
                        "role": "Batsman",
                        "runs": 330,
                        "wickets": 5,
                        "pclSeasons": [
                            "1,2,3,4,5,6,7"
                        ],
                        "basePrice": 500,
                        "soldPrice": 4000,
                        "photo": "üèè",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 6,
                        "name": "Akash Pande",
                        "role": "Batsman",
                        "runs": 21,
                        "wickets": 0,
                        "pclSeasons": [
                            "7"
                        ],
                        "basePrice": 500,
                        "soldPrice": 2400,
                        "photo": "üèè",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 84,
                        "name": "Yash Konghe",
                        "role": "Batsman",
                        "runs": 0,
                        "wickets": 0,
                        "pclSeasons": [
                            "0"
                        ],
                        "basePrice": 500,
                        "soldPrice": 1000,
                        "photo": "üèè",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 36,
                        "name": "Mayur Patle",
                        "role": "All-Rounder",
                        "runs": 523,
                        "wickets": 31,
                        "pclSeasons": [
                            "1,2,3,4,5,6,7"
                        ],
                        "basePrice": 500,
                        "soldPrice": 4800,
                        "photo": "üèè",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 80,
                        "name": "Ujwal Shelke",
                        "role": "Batsman",
                        "runs": 38,
                        "wickets": 0,
                        "pclSeasons": [
                            "7"
                        ],
                        "basePrice": 500,
                        "soldPrice": 2200,
                        "photo": "üèè",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 43,
                        "name": "Nitin Bambal",
                        "role": "Batsman",
                        "runs": 30,
                        "wickets": 1,
                        "pclSeasons": [
                            "6,7"
                        ],
                        "basePrice": 500,
                        "soldPrice": 500,
                        "photo": "üèè",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 34,
                        "name": "Mandar  Kulkarni",
                        "role": "Batsman",
                        "runs": 158,
                        "wickets": 1,
                        "pclSeasons": [
                            "1,3,4,5,6,7"
                        ],
                        "basePrice": 500,
                        "soldPrice": 3200,
                        "photo": "photos/Mandar_Kulkarni_RCB.jpg",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 20,
                        "name": "Bhavesh Chandiwale",
                        "role": "Batsman",
                        "runs": 0,
                        "wickets": 0,
                        "pclSeasons": [
                            "0"
                        ],
                        "basePrice": 500,
                        "soldPrice": 1000,
                        "photo": "üèè",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 38,
                        "name": "Mohammad Mohtashim",
                        "role": "All-Rounder",
                        "runs": 115,
                        "wickets": 31,
                        "pclSeasons": [
                            "6,7"
                        ],
                        "basePrice": 500,
                        "soldPrice": 19000,
                        "photo": "photos/Mohammad_Mohtashim.jpg",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 79,
                        "name": "Swapnajeet Mahure",
                        "role": "Batsman",
                        "runs": 289,
                        "wickets": 9,
                        "pclSeasons": [
                            "2,5,6,7"
                        ],
                        "basePrice": 500,
                        "soldPrice": 4000,
                        "photo": "photos/Swapnajeet_Mahure.jpg",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 49,
                        "name": "Rahul Kahate",
                        "role": "Batsman",
                        "runs": 323,
                        "wickets": 2,
                        "pclSeasons": [
                            "1,2,3,4"
                        ],
                        "basePrice": 500,
                        "soldPrice": 2600,
                        "photo": "photos/Rahul_Kahate.jpg",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 32,
                        "name": "Laksh Gonnade ",
                        "role": "Batsman",
                        "runs": 92,
                        "wickets": 0,
                        "pclSeasons": [
                            "7"
                        ],
                        "basePrice": 500,
                        "soldPrice": 3200,
                        "photo": "photos/Laksh_Gonnade.jpg",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 66,
                        "name": "Saurabh Netke",
                        "role": "Batsman",
                        "runs": 36,
                        "wickets": 1,
                        "pclSeasons": [
                            "6,7"
                        ],
                        "basePrice": 500,
                        "soldPrice": 3800,
                        "photo": "photos/Saurabh_Netke.jpg",
                        "battingStyle": "Right-handed"
                    }
                ]
            },
            {
                "id": 7,
                "name": "Super Kings",
                "budget": 2100,
                "color": "bg-yellow-800",
                "owner": "Owner 6",
                "players": [
                    {
                        "id": 2,
                        "name": "Abhishek Jaiswal",
                        "role": "All-Rounder",
                        "runs": 441,
                        "wickets": 20,
                        "pclSeasons": [
                            "1,2,3,4,5,6,7"
                        ],
                        "basePrice": 500,
                        "soldPrice": 16000,
                        "photo": "photos/Abhishek_Jaiswal.jpg",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 86,
                        "name": "Yogesh Jaiswal",
                        "role": "Batsman",
                        "runs": 29,
                        "wickets": 20,
                        "pclSeasons": [
                            "6,7"
                        ],
                        "basePrice": 10000,
                        "soldPrice": 10000,
                        "photo": "photos/Yogesh_Jaiswal.jpg",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 97,
                        "name": "Krunal Ghode",
                        "role": "Batsman",
                        "runs": 0,
                        "wickets": 0,
                        "pclSeasons": [
                            "0"
                        ],
                        "basePrice": 500,
                        "soldPrice": 1600,
                        "photo": "üèè",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 39,
                        "name": "Gaurav Baitalwar",
                        "role": "Batsman",
                        "runs": 9,
                        "wickets": 0,
                        "pclSeasons": [
                            "6,7"
                        ],
                        "basePrice": 500,
                        "soldPrice": 1500,
                        "photo": "photos/Gaurav_Baitalwar.jpg",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 87,
                        "name": "Yogesh Joshirao",
                        "role": "Batsman",
                        "runs": 321,
                        "wickets": 2,
                        "pclSeasons": [
                            "1,2,3,4,5,7"
                        ],
                        "basePrice": 500,
                        "soldPrice": 4800,
                        "photo": "üèè",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 31,
                        "name": "Kunal Dhoble",
                        "role": "Batsman",
                        "runs": 46,
                        "wickets": 0,
                        "pclSeasons": [
                            "6,7"
                        ],
                        "basePrice": 500,
                        "soldPrice": 1400,
                        "photo": "üèè",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 55,
                        "name": "Saksham Pal",
                        "role": "Batsman",
                        "runs": 15,
                        "wickets": 19,
                        "pclSeasons": [
                            "7"
                        ],
                        "basePrice": 500,
                        "soldPrice": 1900,
                        "photo": "üèè",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 57,
                        "name": "Sandeep Bhiwgade",
                        "role": "All-Rounder",
                        "runs": 282,
                        "wickets": 90,
                        "pclSeasons": [
                            "1,2,3,4,5,6,7"
                        ],
                        "basePrice": 500,
                        "soldPrice": 22500,
                        "photo": "photos/Sandeep_Bhiwgade.jpg",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 25,
                        "name": "Dhiraj Silutkar",
                        "role": "Batsman",
                        "runs": 51,
                        "wickets": 0,
                        "pclSeasons": [
                            "7"
                        ],
                        "basePrice": 500,
                        "soldPrice": 1800,
                        "photo": "üèè",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 35,
                        "name": "Mayank Mishra",
                        "role": "Batsman",
                        "runs": 0,
                        "wickets": 0,
                        "pclSeasons": [
                            "0"
                        ],
                        "basePrice": 500,
                        "soldPrice": 500,
                        "photo": "photos/Mayank_Mishra.jpg",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 89,
                        "name": "Aman Bhardwaj",
                        "role": "Batsman",
                        "runs": 0,
                        "wickets": 0,
                        "pclSeasons": [
                            "0"
                        ],
                        "basePrice": 500,
                        "soldPrice": 1600,
                        "photo": "üèè",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 42,
                        "name": "Nikhil Dusawar",
                        "role": "Batsman",
                        "runs": 0,
                        "wickets": 0,
                        "pclSeasons": [
                            "0"
                        ],
                        "basePrice": 500,
                        "soldPrice": 2800,
                        "photo": "photos/Nikhil_Dusawar.jpg",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 99,
                        "name": "Pranav Dudhe",
                        "role": "Batsman",
                        "runs": 26,
                        "wickets": 0,
                        "pclSeasons": [
                            "7"
                        ],
                        "basePrice": 500,
                        "soldPrice": 3200,
                        "photo": "üèè",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 72,
                        "name": "Shyam Dhanotiya",
                        "role": "Batsman",
                        "runs": 0,
                        "wickets": 0,
                        "pclSeasons": [
                            "0"
                        ],
                        "basePrice": 500,
                        "soldPrice": 1700,
                        "photo": "üèè",
                        "battingStyle": "Right-handed"
                    },
                    {
                        "id": 21,
                        "name": "Bhushan Dongre",
                        "role": "Batsman",
                        "runs": 10,
                        "wickets": 0,
                        "pclSeasons": [
                            "6,7"
                        ],
                        "basePrice": 500,
                        "soldPrice": 1600,
                        "photo": "üèè",
                        "battingStyle": "Right-handed"
                    }
                ]
            }
        ];

        // Configuration
        const config = {
            useHardcodedData: true, // Set to false to use external file
            teamsFilePath: 'data/teams.json',
            refreshInterval: 30000, // 30 seconds
            autoRefresh: false // Disabled for hardcoded data
        };

        // Initialize the dashboard
        document.addEventListener('DOMContentLoaded', function () {
            loadTeamData();

            // Set up auto-refresh
            if (config.autoRefresh) {
                setInterval(loadTeamData, config.refreshInterval);
            }
        });

        async function loadTeamData() {
            try {
                showLoadingState();

                if (config.useHardcodedData) {
                    // Use hardcoded data
                    updateConnectionStatus('loading', 'üîÑ Loading hardcoded data...');

                    // Simulate loading delay for better UX
                    await new Promise(resolve => setTimeout(resolve, 500));

                    // Process hardcoded team data
                    teams = hardcodedTeamsData.map(team => ({
                        id: team.id || Math.random(),
                        name: team.name || 'Unknown Team',
                        budget: parseInt(team.budget) || 0,
                        players: Array.isArray(team.players) ? team.players.map(player => ({
                            id: player.id || Math.random(),
                            name: player.name || 'Unknown Player',
                            role: player.role || 'Unknown',
                            runs: parseInt(player.runs) || 0,
                            wickets: parseInt(player.wickets) || 0,
                            pclSeasons: Array.isArray(player.pclSeasons) ? player.pclSeasons : [],
                            basePrice: parseInt(player.basePrice) || 0,
                            soldPrice: parseInt(player.soldPrice) || 0,
                            photo: player.photo || 'üèè',
                            battingStyle: player.battingStyle || 'Right-handed'
                        })) : [],
                        color: team.color || 'bg-blue-600',
                        owner: team.owner || ''
                    }));

                    console.log(`‚úÖ Loaded ${teams.length} hardcoded teams with ${teams.reduce((sum, team) => sum + team.players.length, 0)} total players`);

                } else {
                    // Use external file
                    updateConnectionStatus('loading', 'üîÑ Loading teams.json...');

                    // Add cache-busting parameter to ensure fresh data
                    const response = await fetch(`${config.teamsFilePath}?t=${Date.now()}`);

                    if (!response.ok) {
                        throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                    }

                    const data = await response.text();
                    const parsedTeams = JSON.parse(data);

                    if (!Array.isArray(parsedTeams)) {
                        throw new Error('teams.json must contain an array of teams');
                    }

                    // Validate and process team data
                    teams = parsedTeams.map(team => ({
                        id: team.id || Math.random(),
                        name: team.name || 'Unknown Team',
                        budget: parseInt(team.budget) || 0,
                        players: Array.isArray(team.players) ? team.players.map(player => ({
                            id: player.id || Math.random(),
                            name: player.name || 'Unknown Player',
                            role: player.role || 'Unknown',
                            runs: parseInt(player.runs) || 0,
                            wickets: parseInt(player.wickets) || 0,
                            pclSeasons: Array.isArray(player.pclSeasons) ? player.pclSeasons : [],
                            basePrice: parseInt(player.basePrice) || 0,
                            soldPrice: parseInt(player.soldPrice) || 0,
                            photo: player.photo || 'üèè',
                            battingStyle: player.battingStyle || 'Right-handed'
                        })) : [],
                        color: team.color || 'bg-blue-600',
                        owner: team.owner || ''
                    }));

                    console.log(`Loaded ${teams.length} teams from file with ${teams.reduce((sum, team) => sum + team.players.length, 0)} total players`);
                }

                renderDashboard();
                updateConnectionStatus('success', `‚úÖ Loaded ${teams.length} teams`);
                updateLastUpdated();
                updateDataSourceIndicators();

            } catch (error) {
                console.error('Error loading team data:', error);
                showErrorState(error.message);
                updateConnectionStatus('error', '‚ùå Load failed');
            }
        }

        function showLoadingState() {
            document.getElementById('loadingState').classList.remove('hidden');
            document.getElementById('errorState').classList.add('hidden');
            document.getElementById('tournamentSummary').classList.add('hidden');
            document.getElementById('teamsContainer').classList.add('hidden');
        }

        function showErrorState(message) {
            document.getElementById('loadingState').classList.add('hidden');
            document.getElementById('errorState').classList.remove('hidden');
            document.getElementById('tournamentSummary').classList.add('hidden');
            document.getElementById('teamsContainer').classList.add('hidden');
            document.getElementById('errorMessage').textContent = message;
        }

        function renderDashboard() {
            document.getElementById('loadingState').classList.add('hidden');
            document.getElementById('errorState').classList.add('hidden');
            document.getElementById('tournamentSummary').classList.remove('hidden');
            document.getElementById('teamsContainer').classList.remove('hidden');

            renderTournamentSummary();
            renderTeams();
        }

        function renderTournamentSummary() {
            const totalPlayers = teams.reduce((sum, team) => sum + team.players.length, 0);
            const totalSpent = teams.reduce((sum, team) => {
                const teamSpent = team.players.reduce((teamSum, player) => teamSum + (player.soldPrice || 0), 0);
                return sum + teamSpent;
            }, 0);
            const avgSpendPerTeam = teams.length > 0 ? totalSpent / teams.length : 0;

            document.getElementById('totalTeams').textContent = teams.length;
            document.getElementById('totalPlayers').textContent = totalPlayers;
            document.getElementById('totalSpent').textContent = `‚Çπ${totalSpent.toLocaleString()}`;
            document.getElementById('avgSpendPerTeam').textContent = `‚Çπ${Math.round(avgSpendPerTeam).toLocaleString()}`;
        }

        function renderTeams() {
            const sortedTeams = [...teams].sort((a, b) => {
                switch (currentSort) {
                    case 'players':
                        return b.players.length - a.players.length;
                    case 'spent':
                        const aSpent = a.players.reduce((sum, p) => sum + (p.soldPrice || 0), 0);
                        const bSpent = b.players.reduce((sum, p) => sum + (p.soldPrice || 0), 0);
                        return bSpent - aSpent;
                    case 'budget':
                        return b.budget - a.budget;
                    default:
                        return a.name.localeCompare(b.name);
                }
            });

            const teamsHtml = sortedTeams.map(team => {
                const totalBudget = 75000; // Assuming standard budget
                const teamSpent = team.players.reduce((sum, player) => sum + (player.soldPrice || 0), 0);
                const remainingBudget = team.budget;
                const spentPercentage = totalBudget > 0 ? ((teamSpent / totalBudget) * 100).toFixed(1) : 0;
                const requiredPlayers = 15;
                const currentPlayers = team.players.length;
                const remainingSlots = Math.max(0, requiredPlayers - currentPlayers);

                // Team status
                let teamStatus, statusColor;
                if (currentPlayers >= requiredPlayers) {
                    teamStatus = '‚úÖ Squad Complete';
                    statusColor = 'text-green-400';
                } else if (remainingSlots <= 2) {
                    teamStatus = `‚ö° Need ${remainingSlots} more`;
                    statusColor = 'text-yellow-400';
                } else {
                    teamStatus = `üîÑ Need ${remainingSlots} more`;
                    statusColor = 'text-blue-400';
                }

                return `
                    <div class="team-card bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20 fade-in">
                        <div class="flex items-center justify-between mb-4">
                            <div class="flex items-center">
                                <div class="w-4 h-4 ${team.color} rounded-full mr-3"></div>
                                <h3 class="text-xl font-bold">${team.name}</h3>
                            </div>
                            <div class="text-right text-sm">
                                <div class="text-yellow-400 font-bold">‚Çπ${remainingBudget.toLocaleString()}</div>
                                <div class="text-gray-400">remaining</div>
                            </div>
                        </div>
                        
                        ${team.owner ? `
                            <div class="mb-3 text-sm text-gray-300">
                                <span class="text-gray-400">Owner:</span> ${team.owner}
                            </div>
                        ` : ''}
                        
                        <div class="mb-4 p-3 bg-white/5 rounded-lg">
                            <div class="grid grid-cols-2 gap-4 text-sm mb-3">
                                <div>
                                    <span class="text-gray-400">Players:</span>
                                    <span class="font-bold ml-2 ${statusColor}">${currentPlayers}/${requiredPlayers}</span>
                                </div>
                                <div>
                                    <span class="text-gray-400">Spent:</span>
                                    <span class="font-bold ml-2 text-red-400">‚Çπ${teamSpent.toLocaleString()}</span>
                                </div>
                            </div>
                            <div class="text-center mb-2">
                                <span class="text-xs px-3 py-1 rounded-full ${currentPlayers >= requiredPlayers ? 'bg-green-500/20 text-green-400' : remainingSlots <= 2 ? 'bg-yellow-500/20 text-yellow-400' : 'bg-blue-500/20 text-blue-400'}">
                                    ${teamStatus}
                                </span>
                            </div>
                            ${remainingSlots > 0 ? `
                                <div class="text-xs text-center text-gray-400 mb-2">
                                    Budget per remaining slot: ‚Çπ${Math.round(remainingBudget / remainingSlots).toLocaleString()}
                                </div>
                            ` : ''}
                            <div class="w-full bg-gray-700 rounded-full h-2">
                                <div class="${team.color} h-2 rounded-full transition-all duration-500" style="width: ${spentPercentage}%"></div>
                            </div>
                        </div>
                        
                        <!-- Role-wise breakdown -->
                        <div class="mb-4">
                            <h4 class="text-sm font-bold text-gray-300 mb-2">Squad Composition</h4>
                            <div class="grid grid-cols-2 gap-2 text-xs">
                                ${['Batsman', 'Bowler', 'All-Rounder', 'Wicket-keeper'].map(role => {
                    const roleCount = team.players.filter(p => p.role === role).length;
                    return `
                                        <div class="flex justify-between bg-white/5 rounded px-2 py-1">
                                            <span class="text-gray-400">${role}:</span>
                                            <span class="font-bold">${roleCount}</span>
                                        </div>
                                    `;
                }).join('')}
                            </div>
                        </div>
                        
                        <!-- Players list -->
                        <div class="space-y-2">
                            <h4 class="text-sm font-bold text-gray-300">Squad Players</h4>
                            ${team.players.length > 0 ? `
                                <div class="space-y-1 max-h-64 overflow-y-auto">
                                    ${team.players.map(player => `
                                        <div class="flex items-center justify-between text-sm bg-white/5 rounded p-2 hover:bg-white/10 transition-colors cursor-pointer" onclick="showPlayerDetails(${JSON.stringify(player).replace(/"/g, '&quot;')})">
                                            <div class="flex items-center space-x-2">
                                                <div class="w-8 h-8 rounded-md bg-white/10 flex items-center justify-center overflow-hidden">
                                                    ${player.photo && (player.photo.includes('.jpg') || player.photo.includes('.png') || player.photo.includes('.jpeg') || player.photo.includes('.gif')) ?
                        `<img src="${player.photo}" alt="${player.name}" class="w-full h-full object-cover" onerror="this.style.display='none'; this.parentElement.innerHTML='<div class=\\'text-sm\\'>üèè</div>';">` :
                        `<div class="text-sm">${player.photo || 'üèè'}</div>`
                    }
                                                </div>
                                                <div>
                                                    <div class="font-medium">${player.name}</div>
                                                    <div class="text-xs text-gray-400">${player.role}</div>
                                                </div>
                                            </div>
                                            <div class="text-right">
                                                <div class="text-green-400 font-bold">‚Çπ${(player.soldPrice || 0).toLocaleString()}</div>
                                                <div class="text-xs text-gray-400">Base: ‚Çπ${(player.basePrice || 0).toLocaleString()}</div>
                                            </div>
                                        </div>
                                    `).join('')}
                                </div>
                            ` : `
                                <div class="text-center py-8 text-gray-400">
                                    <div class="text-4xl mb-2">üèè</div>
                                    <div class="text-2xl mb-2">üèüÔ∏è</div>
                                    <p>No players yet</p>
                                    <p class="text-xs mt-2">üéØ Need ${remainingSlots} players for Season 8</p>
                                </div>
                            `}
                        </div>
                    </div>
                `;
            }).join('');

            document.getElementById('teamsGrid').innerHTML = teamsHtml;
            document.getElementById('teamCount').textContent = teams.length;
        }

        function sortTeams() {
            currentSort = document.getElementById('sortBy').value;
            renderTeams();
        }

        function showPlayerDetails(player) {
            const detailsHtml = `
                <div class="text-center mb-4">
                    <div class="w-24 h-24 rounded-xl bg-white/10 flex items-center justify-center mx-auto mb-3 overflow-hidden">
                        ${player.photo && (player.photo.includes('.jpg') || player.photo.includes('.png') || player.photo.includes('.jpeg') || player.photo.includes('.gif')) ?
                    `<img src="${player.photo}" alt="${player.name}" class="w-full h-full object-cover" onerror="this.style.display='none'; this.parentElement.innerHTML='<div class=\\'text-4xl\\'>üèè</div>';">` :
                    `<div class="text-4xl">${player.photo || 'üèè'}</div>`
                }
                    </div>
                    <h3 class="text-xl font-bold">${player.name}</h3>
                    <p class="text-gray-300">${player.role}</p>
                </div>
                
                <div class="space-y-3">
                    <div class="grid grid-cols-2 gap-4 text-sm">
                        <div class="bg-white/5 rounded p-3 text-center">
                            <div class="text-xl mb-1">üèÉ‚Äç‚ôÇÔ∏è</div>
                            <div class="text-gray-400 text-xs">Runs</div>
                            <div class="font-bold text-lg">${player.runs || 0}</div>
                        </div>
                        <div class="bg-white/5 rounded p-3 text-center">
                            <div class="text-xl mb-1">üéØ</div>
                            <div class="text-gray-400 text-xs">Wickets</div>
                            <div class="font-bold text-lg">${player.wickets || 0}</div>
                        </div>
                    </div>
                    
                    <div class="bg-white/5 rounded p-3">
                        <div class="flex items-center space-x-2 mb-1">
                            <span class="text-lg">üèè</span>
                            <div class="text-gray-400 text-xs">Batting Style</div>
                        </div>
                        <div class="font-medium">${player.battingStyle || 'N/A'}</div>
                    </div>
                    
                    <div class="bg-white/5 rounded p-3">
                        <div class="flex items-center space-x-2 mb-1">
                            <span class="text-lg">üèÜ</span>
                            <div class="text-gray-400 text-xs">PCL Seasons</div>
                        </div>
                        <div class="font-medium">${player.pclSeasons && player.pclSeasons.length > 0 ? player.pclSeasons.join(', ') : 'New to Season 8'}</div>
                    </div>
                    
                    <div class="grid grid-cols-2 gap-4">
                        <div class="bg-blue-500/20 rounded p-3 text-center">
                            <div class="text-xl mb-1">üíé</div>
                            <div class="text-blue-400 text-xs">Base Price</div>
                            <div class="font-bold">‚Çπ${(player.basePrice || 0).toLocaleString()}</div>
                        </div>
                        <div class="bg-green-500/20 rounded p-3 text-center">
                            <div class="text-xl mb-1">üí∞</div>
                            <div class="text-green-400 text-xs">Sold Price</div>
                            <div class="font-bold">‚Çπ${(player.soldPrice || 0).toLocaleString()}</div>
                        </div>
                    </div>
                    
                    ${player.soldPrice && player.basePrice ? `
                        <div class="bg-yellow-500/20 rounded p-3 text-center">
                            <div class="text-xl mb-1">‚≠ê</div>
                            <div class="text-yellow-400 text-xs">Value Rating</div>
                            <div class="font-bold">${calculateValueRating(player)}</div>
                        </div>
                    ` : ''}
                </div>
            `;

            document.getElementById('playerDetails').innerHTML = detailsHtml;
            document.getElementById('playerModal').classList.remove('hidden');
        }

        function closePlayerModal() {
            document.getElementById('playerModal').classList.add('hidden');
        }

        function calculateValueRating(player) {
            const soldPrice = player.soldPrice || 0;
            const basePrice = player.basePrice || 0;

            if (soldPrice <= basePrice) return 'Excellent Value';
            if (soldPrice <= basePrice * 1.5) return 'Good Value';
            if (soldPrice <= basePrice * 2) return 'Fair Value';
            if (soldPrice <= basePrice * 3) return 'Premium Buy';
            return 'Expensive';
        }

        function updateConnectionStatus(type, message) {
            const statusEl = document.getElementById('connectionStatus');
            statusEl.className = `text-xs px-3 py-1 rounded-full ${type === 'success' ? 'bg-green-500/20 text-green-400' :
                type === 'error' ? 'bg-red-500/20 text-red-400' :
                    'bg-blue-500/20 text-blue-400'
                }`;
            statusEl.textContent = message;
        }

        function updateLastUpdated() {
            document.getElementById('lastUpdated').textContent = `Last updated: ${new Date().toLocaleTimeString()}`;
        }

        function updateDataSourceIndicators() {
            const dataSourceText = config.useHardcodedData ? 'üìä Using hardcoded data' : 'üìÅ Using external file';
            const errorInfoText = config.useHardcodedData ?
                'üèüÔ∏è Currently using hardcoded Season 8 data' :
                'üèüÔ∏è Make sure teams.json file is available at: data/teams.json';

            const dataSourceEl = document.getElementById('dataSource');
            const dataSourceInfoEl = document.getElementById('dataSourceInfo');

            if (dataSourceEl) dataSourceEl.textContent = dataSourceText;
            if (dataSourceInfoEl) dataSourceInfoEl.innerHTML = errorInfoText;
        }

        function refreshData() {
            loadTeamData();
        }

        // File Upload Handler
        function handleFileUpload(event) {
            const file = event.target.files[0];
            if (!file) return;

            if (file.type !== 'application/json') {
                alert('‚ùå Please select a valid JSON file');
                return;
            }

            const reader = new FileReader();
            reader.onload = function (e) {
                try {
                    const uploadedData = JSON.parse(e.target.result);

                    if (!Array.isArray(uploadedData)) {
                        throw new Error('JSON file must contain an array of teams');
                    }

                    // Validate basic structure
                    uploadedData.forEach((team, index) => {
                        if (!team.name) {
                            throw new Error(`Team at index ${index} is missing a name`);
                        }
                        if (!Array.isArray(team.players)) {
                            throw new Error(`Team "${team.name}" must have a players array`);
                        }
                    });

                    // Process and load the uploaded data
                    teams = uploadedData.map(team => ({
                        id: team.id || Math.random(),
                        name: team.name || 'Unknown Team',
                        budget: parseInt(team.budget) || 0,
                        players: Array.isArray(team.players) ? team.players.map(player => ({
                            id: player.id || Math.random(),
                            name: player.name || 'Unknown Player',
                            role: player.role || 'Unknown',
                            runs: parseInt(player.runs) || 0,
                            wickets: parseInt(player.wickets) || 0,
                            pclSeasons: Array.isArray(player.pclSeasons) ? player.pclSeasons : [],
                            basePrice: parseInt(player.basePrice) || 0,
                            soldPrice: parseInt(player.soldPrice) || 0,
                            photo: player.photo || 'üèè',
                            battingStyle: player.battingStyle || 'Right-handed'
                        })) : [],
                        color: team.color || 'bg-blue-600',
                        owner: team.owner || ''
                    }));

                    console.log(`‚úÖ Uploaded ${teams.length} teams with ${teams.reduce((sum, team) => sum + team.players.length, 0)} total players`);

                    renderDashboard();
                    updateConnectionStatus('success', `‚úÖ Uploaded ${teams.length} teams`);
                    updateLastUpdated();

                    // Show success message
                    showNotification('‚úÖ Teams data uploaded successfully!', 'success');

                } catch (error) {
                    console.error('Error parsing uploaded file:', error);
                    alert(`‚ùå Error loading file: ${error.message}`);
                    updateConnectionStatus('error', '‚ùå Upload failed');
                }
            };

            reader.onerror = function () {
                alert('‚ùå Error reading file');
                updateConnectionStatus('error', '‚ùå File read failed');
            };

            reader.readAsText(file);

            // Reset file input
            event.target.value = '';
        }

        // Download Teams Data
        function downloadTeamsData() {
            if (!teams || teams.length === 0) {
                alert('‚ùå No team data to download. Please load data first.');
                return;
            }

            try {
                // Create a clean copy of the data for download
                const dataToDownload = teams.map(team => ({
                    id: team.id,
                    name: team.name,
                    budget: team.budget,
                    owner: team.owner,
                    color: team.color,
                    players: team.players.map(player => ({
                        id: player.id,
                        name: player.name,
                        role: player.role,
                        runs: player.runs,
                        wickets: player.wickets,
                        pclSeasons: player.pclSeasons,
                        basePrice: player.basePrice,
                        soldPrice: player.soldPrice,
                        photo: player.photo,
                        battingStyle: player.battingStyle
                    }))
                }));

                const jsonString = JSON.stringify(dataToDownload, null, 2);
                const blob = new Blob([jsonString], { type: 'application/json' });
                const url = URL.createObjectURL(blob);

                const a = document.createElement('a');
                a.href = url;
                a.download = `teams-season8-${new Date().toISOString().split('T')[0]}.json`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);

                showNotification('üíæ Teams data downloaded successfully!', 'success');
                console.log(`üì• Downloaded teams data: ${teams.length} teams, ${teams.reduce((sum, team) => sum + team.players.length, 0)} players`);

            } catch (error) {
                console.error('Error downloading teams data:', error);
                alert(`‚ùå Error downloading file: ${error.message}`);
            }
        }

        // Show notification
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `fixed top-20 right-4 px-6 py-3 rounded-lg text-white font-medium z-50 transition-all duration-300 ${type === 'success' ? 'bg-green-500' :
                type === 'error' ? 'bg-red-500' :
                    'bg-blue-500'
                }`;
            notification.textContent = message;

            document.body.appendChild(notification);

            // Animate in
            setTimeout(() => {
                notification.style.transform = 'translateX(0)';
                notification.style.opacity = '1';
            }, 100);

            // Remove after 3 seconds
            setTimeout(() => {
                notification.style.transform = 'translateX(100%)';
                notification.style.opacity = '0';
                setTimeout(() => {
                    if (notification.parentNode) {
                        document.body.removeChild(notification);
                    }
                }, 300);
            }, 3000);
        }

        // Close modal when clicking outside
        document.getElementById('playerModal').addEventListener('click', function (e) {
            if (e.target === this) {
                closePlayerModal();
            }
        });

        // Keyboard shortcuts
        document.addEventListener('keydown', function (e) {
            if (e.key === 'Escape') {
                closePlayerModal();
            }
            if (e.key === 'r' || e.key === 'R') {
                if (e.ctrlKey || e.metaKey) {
                    e.preventDefault();
                    refreshData();
                }
            }
        });
    </script>
    <script>(function () { function c() { var b = a.contentDocument || a.contentWindow.document; if (b) { var d = b.createElement('script'); d.innerHTML = "window.__CF$cv$params={r:'9796df24d45b9371',t:'MTc1NjkxOTU0Mi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);"; b.getElementsByTagName('head')[0].appendChild(d) } } if (document.body) { var a = document.createElement('iframe'); a.height = 1; a.width = 1; a.style.position = 'absolute'; a.style.top = 0; a.style.left = 0; a.style.border = 'none'; a.style.visibility = 'hidden'; document.body.appendChild(a); if ('loading' !== document.readyState) c(); else if (window.addEventListener) document.addEventListener('DOMContentLoaded', c); else { var e = document.onreadystatechange || function () { }; document.onreadystatechange = function (b) { e(b); 'loading' !== document.readyState && (document.onreadystatechange = e, c()) } } } })();</script>
</body>

</html>